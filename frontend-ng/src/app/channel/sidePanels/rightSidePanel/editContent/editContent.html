<md-toolbar class="edit-title-toolbar">
  <div class="md-toolbar-tools">
    <h1 class="md-title text-truncate" title="{{ $ctrl.doc.displayName }}">
      {{ $ctrl.title }}
    </h1>

    <span flex></span>

    <md-button class="md-icon-button btn-fullwidth qa-rightsidepanel-fullwidth"
               aria-label="{{ ::'FULL_WIDTH' | translate }}"
               ng-click="$ctrl.setFullWidth(true)"
               ng-show="!$ctrl.isFullWidth"
               title="{{ ::'FULL_WIDTH' | translate }}">
      <md-icon md-svg-icon="maximize-sidepanel"></md-icon>
    </md-button>
    <md-button class="md-icon-button btn-normalwidth qa-rightsidepanel-normalwidth"
               aria-label="{{ ::'RESTORE_WIDTH' | translate }}"
               ng-click="$ctrl.setFullWidth(false)"
               ng-show="$ctrl.isFullWidth"
               title="{{ ::'RESTORE_WIDTH' | translate }}">
      <md-icon md-svg-icon="un-maximize-sidepanel"></md-icon>
    </md-button>
    <md-button class="md-icon-button qa-edit-in-content-perspective"
               aria-label="{{ ::'SWITCH_TO_CONTENT_EDITOR' | translate }}"
               ng-disabled="$ctrl.disableContentButtons"
               ng-hide="$ctrl.createContent"
               ng-click="$ctrl.openContentEditor('edit', false)"
               title="{{ ::'SWITCH_TO_CONTENT_EDITOR' | translate }}">
      <md-icon md-svg-icon="switch-to-content-editor"></md-icon>
    </md-button>
    <md-button class="md-icon-button qa-publish-in-content-perspective"
               aria-label="{{ ::'PUBLISH' | translate }}"
               ng-disabled="!$ctrl.editing || $ctrl.disableContentButtons"
               ng-hide="$ctrl.createContent"
               ng-click="$ctrl.openContentEditor('view')"
               title="{{ ::'PUBLISH' | translate }}">
      <md-icon md-svg-icon="publish"></md-icon>
    </md-button>
  </div>
  <md-progress-linear md-mode="indeterminate"
                      ng-if="$ctrl.loading">
  </md-progress-linear>
</md-toolbar>

<sharedspace-toolbar ng-if="$ctrl.docType"></sharedspace-toolbar>

<md-content flex="grow"
            layout="column"
            id="rightSidePanel-content">

  <md-subheader class="md-no-sticky"
                ng-if="$ctrl.docType && !$ctrl.docType.allFieldsIncluded"
                md-colors="{background: 'hippo-grey-200'}">
    <div>{{ ::'NOT_ALL_FIELDS_SHOWN' | translate }}</div>
    <!-- use double quotes in the click action expression so we can use single quotes in the translation value -->
    <div translate="NOT_ALL_FIELDS_SHOWN_LINK" translate-value-click-action='$ctrl.openContentEditor("edit")' translate-compile></div>
  </md-subheader>

  <div ng-if="$ctrl.feedback"
       class="md-padding feedback qa-feedback"
       md-colors="{background: 'hippo-red-50'}">
    <h4 class="qa-feedback-title">{{::$ctrl.feedback.title | translate}}</h4>

    <p class="qa-feedback-message">
      {{::$ctrl.feedback.message }}
    </p>

    <md-button ng-if="::$ctrl.feedback.linkToContentEditor"
               ng-click="$ctrl.openContentEditor('edit')">
      <md-icon md-svg-icon="switch-to-content-editor"></md-icon>
      {{ ::'FEEDBACK_SWITCH_TO_CONTENT_EDITOR' | translate }}
    </md-button>
  </div>

  <form novalidate ng-if="$ctrl.editing"
        name="$ctrl.form"
        class="form-dense-layout">
    <document-fields class="top-level"
                     field-types="$ctrl.docType.fields"
                     field-values="$ctrl.doc.fields">
    </document-fields>
  </form>
</md-content>

<md-toolbar ng-hide="$ctrl.createContent">
  <div class="md-toolbar-tools">
    <span flex></span>

    <md-button class="qa-close"
               ng-click="$ctrl.close()">
      {{ $ctrl.closeButtonLabel() }}
    </md-button>

    <md-button class="qa-save"
               ng-click="$ctrl.saveDocument()"
               ng-disabled="!$ctrl.editing || !$ctrl.isDocumentDirty() || $ctrl.form.$invalid">
      {{ $ctrl.createContent ? 'CREATE' : 'SAVE' | translate }}
    </md-button>
  </div>
</md-toolbar>
