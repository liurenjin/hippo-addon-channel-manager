<div ng-repeat="fieldType in ::$ctrl.fieldTypes"
     ng-class="{'form-field-focused': $ctrl.isFieldFocused(fieldType) }">

  <!-- edge case: a multiple field with zero values -->
  <md-input-container ng-if="::$ctrl.isEmptyMultiple(fieldType)"
                      class="md-block form-field-multiple qa-field"
                      md-no-float>
    <label>{{ ::fieldType.displayName }}</label>
    <input disabled value="{{ 'NONE' | translate }}" placeholder="">
  </md-input-container>

  <!-- other cases -->
  <md-input-container ng-if="::!$ctrl.isEmptyMultiple(fieldType)"
                      class="md-block qa-field"
                      ng-class="::{'form-field-multiple': fieldType.multiple}"
                      md-no-float
                      ng-repeat="value in ::$ctrl.getFieldAsArray(fieldType.id)"
                      ng-switch="fieldType.type">

    <label ng-if="$first">{{ ::fieldType.displayName }}</label>

    <!-- editors per field type -->
    <input ng-switch-when="STRING"
           ng-model="$ctrl.fieldValues[fieldType.id]"
           placeholder=""
           ng-focus="$ctrl.onFieldFocus(fieldType)"
           ng-blur="$ctrl.onFieldBlur()">
    <textarea ng-switch-when="MULTILINE_STRING"
              ng-model="$ctrl.fieldValues[fieldType.id]"
              placeholder=""
              md-no-resize
              ng-focus="$ctrl.onFieldFocus(fieldType)"
              ng-blur="$ctrl.onFieldBlur()">
    </textarea>

    <!-- TODO: remove once all field types for PSP1 have been implemented -->
    <input ng-switch-default disabled value="TODO">

  </md-input-container>
</div>
