<!--
  ~ Copyright 2014 Hippo B.V. (http://www.onehippo.com)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~  http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div>
    <form name="form" role="form" novalidate class="l-fixed-height">
        <p class="alert alert-danger alert-dismissable" ng-show="feedback.message">
            <button type="button" class="close" data-ng-click="dismissFeedback()">&times;</button>
            {{feedback.message}}
        </p>
        <h1><strong>{{ selectedMenuItem.title | placeholder:'UNTITLED' }}</strong> {{ 'MENU_ITEM' | translate }}</h1>
        <div class="form-group has-feedback"
             data-ng-class="{
            'has-success': form.title.$dirty && form.title.$valid,
            'has-error': form.title.$dirty && form.title.$invalid
        }">
            <label for="hippo.channel.menu.menuItem.add.title">{{ 'LABEL' | translate }}</label>
            <input type="text" name="title" class="form-control" id="hippo.channel.menu.menuItem.add.title"
                   data-ng-attr-placeholder="{{ 'LABEL' | translate }}"
                   data-auto-focus
                   data-ng-model="selectedMenuItem.title"
                   data-ng-focus="form.title.$setPristine();"
                   data-ng-required="true"
                   data-tooltip="{{ 'LABEL_REQUIRED' | translate }}"
                   data-tooltip-trigger="show"
                   data-tooltip-show="form.title.$dirty && form.title.$invalid"
                   data-tooltip-placement="top">
            <i class="fa form-control-feedback"
               data-ng-class="{
            'fa-check': form.title.$dirty && form.title.$valid,
            'fa-times': form.title.$dirty && form.title.$invalid
           }"></i>
        </div>
        <label for="hippo.channel.menu.menuItem.add.linkType">{{ 'DESTINATION' | translate }}</label>
        <div class="form-group has-feedback" id="hippo.channel.menu.menuItem.add.linkType">
            <div class="radio first">
                <label>
                    <input type="radio" name="destination"
                           data-ng-model="selectedMenuItem.linkType"
                           value="SITEMAPITEM"
                           data-ng-click="selectedMenuItem.link = ''; focus('hippo.channel.menu.menuItem.add.sitemapItem')">
                    {{ 'INTERNAL_LINK' | translate }}
                </label>
            </div>
            <div class="radio">
                <label>
                    <input type="radio" name="destination"
                           data-ng-model="selectedMenuItem.linkType"
                           value="EXTERNAL"
                           data-ng-click="selectedMenuItem.link = ''; focus('hippo.channel.menu.menuItem.add.url')">
                    {{ 'EXTERNAL_LINK' | translate }}
                </label>
            </div>
            <div class="radio">
                <label>
                    <input type="radio" name="destination"
                           data-ng-model="selectedMenuItem.linkType"
                           value="NONE"
                           data-ng-click="selectedMenuItem.link = ''">
                    {{ 'NONE' | translate }}
                </label>
            </div>
        </div>
        <div class="form-group has-feedback"
             data-ng-show="selectedMenuItem.linkType === 'SITEMAPITEM'"
             data-ng-class="{
            'has-success': form.sitemapItem.$dirty && form.sitemapItem.$valid,
            'has-error': form.sitemapItem.$dirty && form.sitemapItem.$invalid
         }">
            <label for="hippo.channel.menu.menuItem.add.sitemapItem">{{ 'INTERNAL_LINK' | translate }}</label>
                <input type="text" name="sitemapItem" class="form-control" id="hippo.channel.menu.menuItem.add.sitemapItem"
                       data-ng-model="selectedMenuItem.link">
                <i class="fa form-control-feedback"
                   data-ng-show="form.sitemapItem.$dirty"
                   data-ng-class="{
                'fa-check': form.sitemapItem.$dirty && form.sitemapItem.$valid,
                'fa-times': form.sitemapItem.$dirty && form.sitemapItem.$invalid
               }"></i>
        </div>
        <div class="form-group has-feedback"
             data-ng-show="selectedMenuItem.linkType === 'EXTERNAL'"
             data-ng-class="{
            'has-success': form.url.$dirty && form.url.$valid,
            'has-error': form.url.$dirty && form.url.$invalid
         }">
            <label for="hippo.channel.menu.menuItem.add.url">{{ 'EXTERNAL_LINK' | translate }}</label>
            <input type="text" name="url" class="form-control" id="hippo.channel.menu.menuItem.add.url"
                   data-ng-attr-placeholder="{{ 'EXAMPLE_DOMAIN' | translate }}"
                   data-ng-model="selectedMenuItem.link"
                   data-ng-required="true"
                   data-tooltip="{{ 'EXTERNAL_LINK_INVALID' | translate }}"
                   data-tooltip-trigger="show"
                   data-tooltip-show="form.url.$dirty && form.url.$invalid"
                   data-tooltip-placement="top">
            <i class="fa form-control-feedback"
               data-ng-show="form.url.$dirty"
               data-ng-class="{
            'fa-check': form.url.$dirty && form.url.$valid,
            'fa-times': form.url.$dirty && form.url.$invalid
           }"></i>
        </div>

        <hr/>

        <button type="submit" class="btn btn-default" ng-click="submit()">{{ 'CREATE_MENU_ITEM' | translate }}</button>
        <button type="submit" class="btn btn-link" ng-click="cancel()">{{ 'CANCEL' | translate }}</button>
    </form>

</div>
